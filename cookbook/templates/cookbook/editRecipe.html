{% extends "cookbook/layout.html" %}
{% load static %}

{% block body %}

<div style="margin: 0 auto;width:95%;">
    <form action="{% url 'recipeEdit' recipe.id %}" method="post" enctype="multipart/form-data" style="width:100%">
        {% csrf_token %}
        <div class="input-group input-group-lg TitleDiv">
            <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroup-sizing-lg">Title</span>
            </div>
            <input type="text" name="title" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-lg" required value="{{recipe.title}}">
        </div>
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text" id="inputGroupFileAddon01">Upload</span>
            </div>
            <div class="custom-file">
                <input type="file" class="custom-file-input" id="inputGroupFile01" name="mainImage" aria-describedby="inputGroupFileAddon01">
                <label class="custom-file-label" for="inputGroupFile01">Choose a Main Image to Replace</label>
            </div>
        </div>
        <input name="stepCount" id="stepcounter" type="number" value="{{recipe.stepCount}}" min="1" hidden>
        <div>
            {% for step in steps%}
                <div class="card">
                    <div class="card-body">
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text">Step {{step.steporder|add:"1"}}</span>
                            </div>
                            <textarea id='step{{step.steporder}}' name='step{{step.steporder}}' class="form-control" required>{{step.content}}</textarea>
                        </div>
                        <div class="input-group mb-3">
                            <div class="input-group-prepend">
                                <span class="input-group-text" id="inputGroupFileAddon01">Upload</span>
                            </div>
                            <div class="custom-file">
                                <input type="file" class="custom-file-input" id="inputGroupFile01" name="img{{step.steporder}}" aria-describedby="inputGroupFileAddon01">
                                <label class="custom-file-label" for="inputGroupFile01">Choose Image to Upload</label>
                            </div>
                        </div>
                    </div>
                </div>
            {% endfor %}
            <button type="button" id="add_step" class="btn btn-primary" style="margin-top:1rem;margin-left:1rem;">Add Step</button>
            <button type="button" id="remove_step" class="btn btn-primary" style="margin-top:1rem;">Remove Step</button>
            <div style="margin:1rem;">
                <input id="publishRecipe" type="submit" class="btn btn-primary btn-lg" value="Upload Recipe">
            </div>
        </div>
    </form>
</div>
{% endblock %}

{% block script %}
    <script src="{% static 'cookbook/composeRecipe.js' %}"></script>
{% endblock %}