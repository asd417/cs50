{% extends "cookbook/layout.html" %}
{% load static %}
{% block body %}
<div>

    <h5>Liked Recipes</h5>

    {% if message == 'Success' %}

        <div class="container">
            <div class="row">
                {% for recipes in recipeGroupTotal %}
                    {% for recipe in recipes%}
                    <div class="col-sm" style="margin-top:1rem;">
                        <div class="card h-100" style="width: 18rem;">
                            {% if recipe.imageurl != "" %}
                            <img src={{recipe.image.url}} class="card-img-top" alt="Missing Image" style="width: 100%;height: 15vw;object-fit: cover;">
                            {% endif %}
                            <div class="card-body">
                                <p class='recipeID' hidden>{{recipe.id}}</p>
                                <h5 class="card-title">{{recipe.title}}</h5>
                                <p>by <a class="card-text" href="{% url 'profile' recipe.author 1 %}">{{ recipe.author }}</a></p>
                                <a class="nav-link" href="{% url 'recipe' recipe.id %}">View Recipe</a>
                                <button id="like{{recipe.id}}" type="button" class="btn btn-outline-danger likebutton">❤️</button>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                    <div class="w-100"></div>
                {% endfor %}
            
            </div>
        </div>
    {% else %}
        <div>
            <h5>{{ message }}</h5>
        </div>
    {% endif %}

    <!--Pagination. currentpage, nextpage, twopage, previouspage-->

    <nav aria-label="Page navigation" style="margin-top: 2rem;">
        <ul class="pagination">
            {% if firstpage %}
                <li class="page-item disabled">
                    <a class="page-link" href="#">Previous</a>
                </li>
                <li class="page-item active">
                    <a class="page-link" href="#">{{currentpage}}</a>
                </li>
                <li class="page-item">
                    <form action="{% url 'liked' %}">
                        <input hidden type="number" name='pagenum' value='{{currentpage|add:"1"}}'>
                        <input class="page-link" type="submit" value='{{currentpage|add:"1"}}'>
                    </form>
                </li>
                <li class="page-item">
                    <form action="{% url 'liked' %}">
                        <input hidden type="number" name='pagenum' value='{{currentpage|add:"2"}}'>
                        <input class="page-link" type="submit" value='{{currentpage|add:"2"}}'>
                    </form>
                </li>
                <li class="page-item">
                    <form action="{% url 'liked' %}">
                        <input hidden type="number" name='pagenum' value='{{currentpage|add:"1"}}'>
                        <input class="page-link" type="submit" value='Next'>
                    </form>
                </li>
            {% else %}
                <li class="page-item">
                    <form action="{% url 'liked' %}">
                        <input hidden type="number" name='pagenum' value='{{currentpage|add:"-1"}}'>
                        <input class="page-link" type="submit" value='Previous'>
                    </form>
                </li>
                <li class="page-item">
                    <form action="{% url 'liked' %}">
                        <input hidden type="number" name='pagenum' value='{{currentpage|add:"-1"}}'>
                        <input class="page-link" type="submit" value='{{currentpage|add:"-1"}}'>
                    </form>
                </li>
                <li class="page-item active"><a class="page-link" href="#">{{currentpage}}</a></li>
                <li class="page-item">
                    <form action="{% url 'liked' %}">
                        <input hidden type="number" name='pagenum' value='{{currentpage|add:"1"}}'>
                        <input class="page-link" type="submit" value='{{currentpage|add:"1"}}'>
                    </form>
                </li>
                <li class="page-item">
                    <form action="{% url 'liked' %}">
                        <input hidden type="number" name='pagenum' value='{{currentpage|add:"1"}}'>
                        <input class="page-link" type="submit" value='Next'>
                    </form>
                </li>
            {% endif %}
        </ul>
    </nav>
</div>
{% endblock %}

{% block script %}
    <script src="{% static 'cookbook/likebutton.js' %}"></script>
{% endblock %}